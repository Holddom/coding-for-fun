# IO库

*************

## IO类

p278

io库类型和头文件

**io类型间的关系**

标准库使我们忽略这些不同类型的流之间的差异

通过 *继承机制* 实现

派生类 基类

就是如何使用istream的 也能如何使用ifstream 和 istringstream

cin getline cout 都可以类推

**io对象无拷贝或赋值**

不能对io对象拷贝或赋值

由于不能拷贝io对象 我们不能将形参或返回类型设置为流类型

进行io操作的函数通常以**引用**方式传递和返回流

同时

读写一个io对象会改变其状态 因此 传递和返回的引用不能是const的

**条件状态**

p279

列出了io类所定义的一些函数和标志

可以访问和操纵流的 **条件状态**

```c++
int ival;
cin>>ival;
```

如果键入Boo

读操作就会失败

一个流一旦发生错误

其上（这个）后续的io操作都会失败

只有当一个流处于无措状态时

我们才可以从它读取数据 写入数据

由于流可能出错

所以我们在使用流前要检查它的状态

最简单的办法是把它当作条件

```c++
while(cin>>word)
    //ok ： 读取操作成功
```

**查询流的状态**

*iostate*类型与机器无关

提供了表达流状态的完整功能

它应作为位集合来使用

p137位集合

io库定义了4个iostate类型的constexpr值

表示特定的位模式

fail bad good bit

**管理条件状态**

流对象的rdstate返回一个iostate状态

setstate操作将给定条件置位

clear重载成员

无参数版本  iostate版本

**管理输出缓冲**

讲了输出缓冲区问题

缓冲区 

导致缓冲刷新的原因

**刷新输出缓冲区**

